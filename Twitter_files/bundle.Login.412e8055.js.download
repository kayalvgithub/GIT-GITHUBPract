(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"1cTF":function(e,t,a){"use strict";a.r(t),a.d(t,"LoginScreen",(function(){return ce})),a.d(t,"styles",(function(){return le}));a("rbfH");var n=a("ERkP"),r=a.n(n),i=a("6/RC"),o=a("RqPI"),s=a("3XMw"),c=a.n(s),l=a("aTAq"),d=a("G6rE"),p=a("rxPX");const h=(e,t)=>t.location.query&&(Object(l.a)(t.location.query.username_or_email)?t.location.query.username_or_email:void 0),u=(e,t)=>o.i(e)||(Object(l.a)(t.location.query.login_verification_error)?y[t.location.query.login_verification_error]:void 0),m=(e,t)=>!!t.location.pathname&&("/login/check"===t.location.pathname||"/login/check/"===t.location.pathname),g=(e,t)=>"true"===t.location.query.username_disabled,b=(e,t)=>"true"===t.location.query.email_disabled,f=(e,t)=>"true"===t.location.query.phone_disabled,y={BadSessionLoginVerification:c.a.f8ad0091,ExpiredLoginVerification:c.a.h2c7767e,OverLimitLoginVerificationAttempts:c.a.e83047c2,OfflineCodeSync:c.a.g4b108ee};var _=Object(p.a)().propsFromState((()=>({errorMessage:u,loginId:h,loginReturnPath:o.r,loggedInUser:d.e.selectLoggedInUser,shouldChallenge:m,shouldDisableUsernameLogin:g,shouldDisableEmailLogin:b,shouldDisablePhoneLogin:f}))).withAnalytics({page:"login"}),v=(a("kYxP"),a("MvUL"),a("SrtL")),w=a("lUZE"),E=a("8jkQ"),C=a("yoO3"),S="LoginPage_Continue_Button",L=a("sgih"),R=a("mw9i"),x=a("t62R"),O=a("jhWN"),k=a("jV+4"),I=a("/yvb"),P=a("Irs7");const T=c.a.d98c140e,D=c.a.e55188f0,F=c.a.d55d8fe1,U=c.a.c3d89aca,j=c.a.g806008e;class A extends r.a.Component{constructor(...e){super(...e),this._handleContinuePress=()=>{const{analytics:e,history:t,location:a}=this.props,{query:n}=a,r=n&&n.redirect_after_login?n.redirect_after_login.toString():void 0,i=r&&E.b.makeSafeForTwitterRedirect(r);r&&i?(e.scribeAction("redirect"),window.location.assign(i)):(e.scribeAction("redirecthome"),t.replace("/home"))},this._handleSwitchAccountPress=()=>{const{analytics:e,history:t}=this.props;e.scribeAction("switch"),t.replace("/account/switch")}}render(){const{loggedInUser:e}=this.props;return r.a.createElement(C.a,null,r.a.createElement(v.a,{title:T}),r.a.createElement(L.a,{type:"full"},r.a.createElement(R.a,{style:[le.root,le.center],withGutter:!0},r.a.createElement(w.a,{style:le.icon}),r.a.createElement(x.b,{accessibilityRole:"heading",align:"center",size:"title4",style:le.heading,weight:"bold"},D),r.a.createElement(O.a,{size:"jumbo",uri:e.profile_image_url_https}),r.a.createElement(k.a,{badgeContext:"account",isProtected:e.protected,isVerified:e.verified,name:e.name,screenName:e.screen_name,style:[le.gutter,le.center],withStackedLayout:!0}),r.a.createElement(x.b,{align:"center",style:le.gutter},F),r.a.createElement(I.a,{onPress:this._handleContinuePress,style:le.gutter,testID:S,type:"brandFilled"},U),r.a.createElement(x.b,{accessibilityRole:"link",align:"center",color:"link",onPress:this._handleSwitchAccountPress,style:le.gutter},j))))}}var V=Object(P.a)(A,{page:"login",section:"continue"}),z=a("mrHL"),M=a("cnVF"),N=a("YeIG"),q=a("TaB8");var H=a("5S/X"),B=a("6oVL"),W=a("Lam0"),X=a("5FtR"),G=a("Es6L"),J=a("MWbm"),Q=a("pxuL"),Y=a("4zmP"),Z=a("pjBI"),$=a("rHpw"),K=a("XJCT");const ee=c.a.d1091f50,te=c.a.eab9ceb1,ae=c.a.g2b8acd4,ne=c.a.bdc9d8a2,re=c.a.c2ab20ab,ie=c.a.id312f0a,oe=c.a.caac124e,se=c.a.ab77e0b8;class ce extends r.a.Component{constructor(e,t){const{loginId:a}=e;super(e,t),this._recaptchaEnabled=!1,this._renderLogin=()=>r.a.createElement(C.a,null,r.a.createElement(v.a,{title:ne}),r.a.createElement(J.a,{style:[le.root,le.container]},this._renderContent())),this._renderContent=()=>{const{errorMessage:e,loginId:t,loginReturnPath:a,shouldDisableEmailLogin:n,shouldDisablePhoneLogin:i,shouldDisableUsernameLogin:o}=this.props,{autoSubmit:s,passwordValue:c,recaptchaSuccessToken:l,recaptchaTermAccepted:d,usernameValue:p}=this.state,h=!!l,u=this._recaptchaEnabled&&!h,m=!(this._recaptchaEnabled&&d);return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{style:le.marginHorizontal},r.a.createElement(w.a,{style:le.icon}),r.a.createElement(x.b,{accessibilityRole:"heading",extendedWidth:!0,size:"title2",style:le.heading,weight:"bold"},ae),e?r.a.createElement(Y.a,{text:e,type:"danger"}):null,m?this._renderAlternativeLoginMethodCopy():null,h?r.a.createElement(x.b,{style:le.passedChallengeCopy},re):null),r.a.createElement(B.a,{autoSubmit:s,hideSubmitButton:u,loginReturnPath:a,submitButtonDisabled:this._hasMissingFields(),submitButtonSize:"xLarge",submitButtonStyle:le.submitButton},r.a.createElement(K.b,{autoFocus:!t,onChange:this._handleUsernameFieldChange,onSubmitEditing:this._handleSubmitEditing,value:p,withEmailDisabled:n,withPhoneDisabled:i,withUsernameDisabled:o}),u?null:r.a.createElement(K.a,{autoFocus:!!t,onChange:this._handlePasswordFieldChange,onSubmitEditing:this._handleSubmitEditing,value:c}),this._recaptchaEnabled?r.a.createElement("input",{defaultValue:l,name:"g-recaptcha-response",style:{display:"none"}}):null),r.a.createElement(J.a,{style:le.marginHorizontal},this._recaptchaEnabled&&!h?this._renderRecaptcha():null,r.a.createElement(x.b,{align:"center",style:le.links},r.a.createElement(Z.a,null,r.a.createElement(x.b,{link:{pathname:"https://twitter.com/account/begin_password_reset",external:!0,openInSameFrame:!0}},ee),r.a.createElement(x.b,{link:"/i/flow/signup"},te)))))},this._renderAlternativeLoginMethodCopy=()=>{const{shouldDisableEmailLogin:e,shouldDisablePhoneLogin:t,shouldDisableUsernameLogin:a}=this.props;let n;return a?n=ie:t?n=se:e&&(n=oe),t||e||a?r.a.createElement(x.b,{color:"magenta500"},n):null},this._renderRecaptcha=()=>{const{usernameValue:e}=this.state;return r.a.createElement(W.a,{nextButtonDisabled:!e,onChange:this._handleRecaptchaStateChange,onConsent:this._handleRecaptchaTermAccepted,withConsentForm:!0})},this._hasMissingFields=()=>{const{passwordValue:e,usernameValue:t}=this.state;return!t||!e},this._handlePasswordFieldChange=e=>{this.setState({passwordValue:e.target.value})},this._handleUsernameFieldChange=e=>{this.setState({usernameValue:e.target.value})},this._handleSubmitEditing=()=>{this._hasMissingFields()||this.setState({autoSubmit:!0})},this._handleRecaptchaStateChange=e=>{const{analytics:t}=this.props,a=e?"passed":"expired";t.scribe({section:"recaptcha",action:a}),e&&this.setState({recaptchaSuccessToken:e})},this._handleRecaptchaTermAccepted=()=>{const{analytics:e}=this.props;e.scribe({section:"recaptcha",component:"terms",action:"accepted"}),this.setState({recaptchaTermAccepted:!0})},this._continueEnabled=this.context.featureSwitches.isTrue("responsive_web_continue_as_always_enabled")||"true"===e.location.query.showContinuePrompt&&this.context.featureSwitches.isTrue("responsive_web_continue_as_param_enabled"),this._shouldRedirectToOCFLoginFlow=!H.b&&this.context.featureSwitches.isTrue("stateful_login_enabled");const{shouldChallenge:n}=e;var i;this._recaptchaEnabled=!!n&&(i=this.context.featureSwitches,!Object(q.a)("responsive_web_3rd_party_category_google_recaptcha",i)),this.state={autoSubmit:!1,recaptchaTermAccepted:!1,usernameValue:a||"",passwordValue:""}}componentDidMount(){const{analytics:e,errorMessage:t}=this.props;this._unsetFlashMessage(this.props),Object(G.a)()&&this.context.setSideNavSupport(!1),t&&e.scribePageImpression({section:"error",action:"show"}),this._recaptchaEnabled&&e.scribePageImpression({section:"recaptcha",action:"show"})}componentDidUpdate(){this._unsetFlashMessage(this.props)}componentWillUnmount(){Object(G.a)()&&this.context.setSideNavSupport(!0)}render(){const{errorMessage:e,history:t,location:a,loggedInUser:n}=this.props;if(this._continueEnabled&&n&&!e)return r.a.createElement(V,{history:t,location:a,loggedInUser:n});if(this._shouldRedirectToOCFLoginFlow){const e=i.canUseDOM&&!Object(N.a)(a.query)?btoa(JSON.stringify(a.query)):"",t=e?encodeURIComponent(JSON.stringify({requested_variant:e})):"",n=t?`/i/flow/login?input_flow_data=${t}`:"/i/flow/login";return r.a.createElement(X.a,{to:n})}return this._renderLogin()}_unsetFlashMessage(e){const{errorMessage:t}=e;t&&Object(z.c)(M.n,{featureSwitches:this.context.featureSwitches})}}ce.contextType=Q.a;const le=$.a.create((e=>({root:{marginTop:e.spaces.space20},marginHorizontal:{marginHorizontal:$.a.theme.spaces.space16},container:{maxWidth:400,marginHorizontal:"auto",width:"100%",paddingHorizontal:e.componentDimensions.gutterHorizontal},links:{marginTop:e.spaces.space20},passedChallengeCopy:{marginVertical:e.spaces.space16},submitButton:{marginVertical:e.spaces.space12,marginHorizontal:e.spaces.space12},icon:{alignSelf:"flex-start",color:e.colors.brandColor,height:e.spaces.space40},heading:{marginHorizontal:0,marginTop:e.spaces.space32,marginBottom:e.spaces.space12},center:{flexDirection:"column",alignItems:"center"},gutter:{marginVertical:e.componentDimensions.gutterVertical}}))),de=_(ce);t.default=de},Lam0:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return b}));var n=a("ERkP"),r=a.n(n),i=a("t+RT"),o=a("MWbm"),s=a("t62R"),c=a("/yvb"),l=a("rHpw"),d=a("3XMw"),p=a.n(d);const h=p.a.c1df579e,u=p.a.b60eba9e,m=p.a.ba939777,g=p.a.bc6efc72;class b extends r.a.Component{constructor(t,a){super(t,a),this._handlePass=e=>{const{onChange:t}=this.props;t&&setTimeout((()=>t(e)),1e3)},this._handleConsent=()=>{const{onConsent:e}=this.props;this.setState({termsAccepted:!0}),e&&e()},this.state={termsAccepted:!1},e.recaptchaOptions={useRecaptchaNet:!0}}_renderConsentForm(){const{nextButtonDisabled:e}=this.props;return r.a.createElement(o.a,null,r.a.createElement(s.b,{style:f.guideCopy},u),r.a.createElement(o.a,{style:f.button},r.a.createElement(c.a,{disabled:e,onPress:this._handleConsent,size:"xLarge",type:"brandOutlined"},h)),r.a.createElement(s.b,{color:"gray700"},r.a.createElement(p.a.I18NFormatMessage,{$i18n:"hc37d3ba"},r.a.createElement(s.b,{link:"https://policies.google.com/privacy"},g))))}_renderRecaptcha(){const{withConsentForm:e}=this.props;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement(o.a,{style:f.recaptchaTitle},r.a.createElement(s.b,{style:f.guideCopy},m)):null,r.a.createElement(o.a,{style:f.container},r.a.createElement(i.a,{onChange:this._handlePass,sitekey:"6LfOP30UAAAAAFBC4jbzu890rTdXBXBNHx9eVZEX"})))}render(){const{withConsentForm:e}=this.props,{termsAccepted:t}=this.state;return e&&!t?this._renderConsentForm():this._renderRecaptcha()}}const f=l.a.create((e=>({container:{margin:"auto",transitionProperty:"opacity",transitionDelay:"2s"},button:{paddingVertical:e.spaces.space20},guideCopy:{paddingTop:e.spaces.space12},recaptchaTitle:{paddingBottom:e.spaces.space20}})))}).call(this,a("fRV1"))},"t+RT":function(e,t,a){"use strict";var n=a("ERkP"),r=a.n(n),i=a("aWzz"),o=a.n(i);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l=function(e){var t,a;function n(){var t;return(t=e.call(this)||this).handleExpired=t.handleExpired.bind(c(t)),t.handleErrored=t.handleErrored.bind(c(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(c(t)),t}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var i=n.prototype;return i.getValue=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this.props.grecaptcha.getResponse(this._widgetId):null},i.getWidgetId=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this._widgetId:null},i.execute=function(){var e=this.props.grecaptcha;if(e&&void 0!==this._widgetId)return e.execute(this._widgetId);this._executeRequested=!0},i.reset=function(){this.props.grecaptcha&&void 0!==this._widgetId&&this.props.grecaptcha.reset(this._widgetId)},i.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.props.onChange&&this.props.onChange(null)},i.handleErrored=function(){this.props.onErrored&&this.props.onErrored()},i.explicitRender=function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&void 0===this._widgetId){var e=document.createElement("div");this._widgetId=this.props.grecaptcha.render(e,{sitekey:this.props.sitekey,callback:this.props.onChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(e)}this._executeRequested&&this.props.grecaptcha&&void 0!==this._widgetId&&(this._executeRequested=!1,this.execute())},i.componentDidMount=function(){this.explicitRender()},i.componentDidUpdate=function(){this.explicitRender()},i.componentWillUnmount=function(){void 0!==this._widgetId&&(this.delayOfCaptchaIframeRemoving(),this.reset())},i.delayOfCaptchaIframeRemoving=function(){var e=document.createElement("div");for(document.body.appendChild(e),e.style.display="none";this.captcha.firstChild;)e.appendChild(this.captcha.firstChild);setTimeout((function(){document.body.removeChild(e)}),5e3)},i.handleRecaptchaRef=function(e){this.captcha=e},i.render=function(){var e=this.props,t=(e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl,function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"]));return r.a.createElement("div",s({},t,{ref:this.handleRecaptchaRef}))},n}(r.a.Component);l.displayName="ReCAPTCHA",l.propTypes={sitekey:o.a.string.isRequired,onChange:o.a.func,grecaptcha:o.a.object,theme:o.a.oneOf(["dark","light"]),type:o.a.oneOf(["image","audio"]),tabindex:o.a.number,onExpired:o.a.func,onErrored:o.a.func,size:o.a.oneOf(["compact","normal","invisible"]),stoken:o.a.string,hl:o.a.string,badge:o.a.oneOf(["bottomright","bottomleft","inline"])},l.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var d=a("oXkQ"),p=a.n(d);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var u={},m=0;function g(){return"undefined"!=typeof window&&window.recaptchaOptions||{}}var b,f,y="onloadcallback",_=g(),v=(b=function(){var e=g(),t=e.lang?"&hl="+e.lang:"";return"https://"+(e.useRecaptchaNet?"recaptcha.net":"www.google.com")+"/recaptcha/api.js?onload="+y+"&render=explicit"+t},f=(f={callbackName:y,globalName:"grecaptcha",removeOnUnmount:_.removeOnUnmount||!1})||{},function(e){var t=e.displayName||e.name||"Component",a=function(t){var a,r;function i(e,a){var n;return(n=t.call(this,e,a)||this).state={},n.__scriptURL="",n}r=t,(a=i).prototype=Object.create(r.prototype),a.prototype.constructor=a,a.__proto__=r;var o=i.prototype;return o.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+m++),this.__scriptLoaderID},o.setupScriptURL=function(){return this.__scriptURL="function"==typeof b?b():b,this.__scriptURL},o.asyncScriptLoaderHandleLoad=function(e){var t=this;this.setState(e,(function(){return t.props.asyncScriptOnLoad&&t.props.asyncScriptOnLoad(t.state)}))},o.asyncScriptLoaderTriggerOnScriptLoaded=function(){var e=u[this.__scriptURL];if(!e||!e.loaded)throw new Error("Script is not loaded.");for(var t in e.observers)e.observers[t](e);delete window[f.callbackName]},o.componentDidMount=function(){var e=this,t=this.setupScriptURL(),a=this.asyncScriptLoaderGetScriptLoaderID(),n=f,r=n.globalName,i=n.callbackName,o=n.scriptId;if(r&&void 0!==window[r]&&(u[t]={loaded:!0,observers:{}}),u[t]){var s=u[t];return s&&(s.loaded||s.errored)?void this.asyncScriptLoaderHandleLoad(s):void(s.observers[a]=function(t){return e.asyncScriptLoaderHandleLoad(t)})}var c={};c[a]=function(t){return e.asyncScriptLoaderHandleLoad(t)},u[t]={loaded:!1,observers:c};var l=document.createElement("script");l.src=t,l.async=!0,o&&(l.id=o);var d=function(e){if(u[t]){var a=u[t].observers;for(var n in a)e(a[n])&&delete a[n]}};i&&"undefined"!=typeof window&&(window[i]=function(){return e.asyncScriptLoaderTriggerOnScriptLoaded()}),l.onload=function(){var e=u[t];e&&(e.loaded=!0,d((function(t){return!i&&(t(e),!0)})))},l.onerror=function(){var e=u[t];e&&(e.errored=!0,d((function(t){return t(e),!0})))},document.body.appendChild(l)},o.componentWillUnmount=function(){var e=this.__scriptURL;if(!0===f.removeOnUnmount)for(var t=document.getElementsByTagName("script"),a=0;a<t.length;a+=1)t[a].src.indexOf(e)>-1&&t[a].parentNode&&t[a].parentNode.removeChild(t[a]);var n=u[e];n&&(delete n.observers[this.asyncScriptLoaderGetScriptLoaderID()],!0===f.removeOnUnmount&&delete u[e])},o.render=function(){var t=f.globalName,a=this.props,r=(a.asyncScriptOnLoad,a.forwardedRef),i=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(a,["asyncScriptOnLoad","forwardedRef"]);return t&&"undefined"!=typeof window&&(i[t]=void 0!==window[t]?window[t]:void 0),i.ref=r,Object(n.createElement)(e,i)},i}(n.Component),r=Object(n.forwardRef)((function(e,t){return Object(n.createElement)(a,h({},e,{forwardedRef:t}))}));return r.displayName="AsyncScriptLoader("+t+")",r.propTypes={asyncScriptOnLoad:o.a.func},p()(r,e)})(l);t.a=v}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Login.412e8055.js.map